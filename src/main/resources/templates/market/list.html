<!DOCTYPE html>
<!-- Default Layout Import-->
<html lang="en"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/common/layouts/defaultLayout}"
      layout:fragment="Content">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script th:src="@{/js/util.js}"></script>
    <title>팜스토리::장보기</title>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <link rel="stylesheet" th:href="@{/css/style2.css}"/>
    <style>
        #listTable .prodImg1{
            max-width: 100px;
            max-height: 100px;
        }

        #sub > .market > .list > table th {
            background-color: black;
        }
    </style>

</head>


<div id="sub">
    <div><img th:src="@{/images/sub_top_tit2.png}" alt="MARKET"></div>
    <section class="market">
        <aside>
            <img th:src="@{/images/sub_aside_cate2_tit.png}" alt="장보기"/>

            <ul class="lnb">
                <li class="on"><a th:href="@{/market/list}">장보기</a></li>
            </ul>
        </aside>
        <article class="list">
            <nav>
                <img th:src="@{/images/sub_nav_tit_cate2_tit1.png}" alt="장보기"/>
                <p>
                    HOME > 장보기 > <em>장보기</em>
                </p>
            </nav>

            <!-- 내용 시작 -->
            <p class="sort">
                <a th:href="@{/market/list}" class="on">전체(20) |</a>
                <a th:href="@{/market/list(cate=fruit)}">과일 |</a>
                <a th:href="@{/market/list(cate=vegetable)}">야채 |</a>
                <a th:href="@{/market/list(cate=grains)}">곡류</a>
            </p>
            <table border="0" id="listTable" class="table">
                <thead>
                <tr class="table-dark">
                    <th>이미지</th>
                    <th>종류</th>
                    <th>상품명</th>
                    <th>할인</th>
                    <th>포인트</th>
                    <th>판매가격</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="product:${products}">
                    <td>
                        <a th:href="@{/market/view(pno=${product.pno})}">
                            <img class="prodImg1" th:src="@{|/product/${product.cate}/${product.img1}|}" alt="상품이미지">
                        </a>
                    </td>
                    <td class="type">[[${product.cate}]]</td>
                    <td class="title"><a th:href="@{/market/view(pno=${product.pno})}">[[${product.pname}]]</a></td>
                    <td class="discount">[[${product.discount}]]%</td>
                    <td class="point">[[${product.point}]]p</td>
                    <td class="price">

                        <strong>[[${product.price} - (${product.price} / 100 * ${product.discount})]]</strong></br>
                        <del>[[${product.price}]]</del>
                    </td>
                </tr>
                </tbody>
            </table>

            <!-- 페이지네이션 -->
            <nav aria-label="...">
                <ul class="pagination justify-content-center">
                    <li th:if="${!productPage.isIsFirstPage()}" class="page-item">
                        <a th:if="${cate == null}" class="page-link" th:href="@{/market/list(pageNum=${productPage.pageNum} -1)}">이전</a>
                        <a th:if="${cate != null}"class="page-link" th:href="@{/market/list(cate=${cate},pageNum=${productPage.pageNum} -1)}">이전</a>
                    </li>
                    <li th:each="num : ${#numbers.sequence(1, (productPage.total)/20)}" class="page-item">
                        <a th:if="${cate == null}" class="page-link" th:href="@{/market/list(pageNum=${num})}">[[${num}]]</a>
                        <a th:if="${cate != null}" class="page-link" th:href="@{/market/list(cate=${cate},pageNum=${num})}">[[${num}]]</a>
                    </li>

                    <li th:if="${productPage.hasNextPage}" class="page-item">
                        <a th:if="${cate == null}" class="page-link" th:href="@{/market/list(pageNum=${productPage.pageNum} +1)}">다음</a>
                        <a th:if="${cate != null}" class="page-link" th:href="@{/market/list(cate=${cate},pageNum=${productPage.pageNum} +1)}">다음</a>
                    </li>
                </ul>
            </nav>

            <a href="#" id="top">
                <img th:src="@{/images/green-top-60.png}"  alt="topBtn">
            </a>
            <!-- 내용 끝 -->

        </article>
    </section>
</div>
</html>